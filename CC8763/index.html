<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Google 登入頁面</title>
</head>
<body>
  <h1>使用 Google 登入</h1>
  <button id="login-btn">登入</button>

  <script type="module">
    // 載入 Firebase 模組
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-analytics.js";
    import { getAuth, signInWithRedirect, GoogleAuthProvider, getRedirectResult } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js";

    // Firebase 配置（請使用你的資料）
    const firebaseConfig = {
      apiKey: "AIzaSyDt9mJRH-BHlEksl4xla32sVIUGVnLUxWY",
      authDomain: "future-infusion-368721.firebaseapp.com",
      databaseURL: "https://future-infusion-368721-default-rtdb.firebaseio.com",
      projectId: "future-infusion-368721",
      storageBucket: "future-infusion-368721.firebasestorage.app",
      messagingSenderId: "345445420847",
      appId: "1:345445420847:web:070778c173ec6157c6dbda",
      measurementId: "G-57PJMMNNWW"
    };

    // 初始化 Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // 當從 Google redirect 回來後，檢查登入結果
    getRedirectResult(auth)
      .then((result) => {
        if (result && result.user) {
          console.log("登入成功！", result.user);
          // 登入成功後，可以導向其他頁面
          window.location.href = "https://rpg-burst-master.itch.io/878787"; // 請替換成你的遊戲或首頁 URL
        }
      })
      .catch((error) => {
        console.error("取得 redirect 結果時發生錯誤：", error);
      });

    // 點擊登入按鈕後，使用 redirect 方式進行 Google 登入
    document.getElementById("login-btn").addEventListener("click", () => {
      signInWithRedirect(auth, provider);
    });
  </script>
</body>
</html>
